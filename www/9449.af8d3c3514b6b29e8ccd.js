(self.webpackChunkKasianFinancial=self.webpackChunkKasianFinancial||[]).push([[9449],{9449:(e,i,t)=>{"use strict";t.r(i),t.d(i,{PaymentPageModule:()=>I});var n=t(8583),o=t(665),a=t(7823),r=t(1348),l=t(8372),s=t(9738),c=t(7528),d=t(8720),g=t(282),m=t(2156),p=t(9226),u=t(4752),h=t(375),Z=t(6440);function C(e,i){if(1&e){const e=d.EpF();d.TgZ(0,"ion-row",23),d.NdJ("click",function(){const i=d.CHM(e).$implicit;return d.oxw().rowGridDtlClick(i)}),d.TgZ(1,"ion-col",12),d.TgZ(2,"ion-text"),d._uU(3),d.qZA(),d.qZA(),d.TgZ(4,"ion-col",13),d.TgZ(5,"ion-grid",24),d.TgZ(6,"ion-row"),d.TgZ(7,"ion-col",25),d.TgZ(8,"ion-input",4),d.NdJ("change",function(i){const t=d.CHM(e).$implicit;return d.oxw().GetValueFromLovWithCode(i,"Cash",t)}),d.qZA(),d.qZA(),d.TgZ(9,"ion-col",26),d.TgZ(10,"ion-button",5),d.NdJ("click",function(){const i=d.CHM(e).$implicit;return d.oxw().ShowCashListLov(i)}),d._UZ(11,"ion-icon",6),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(12,"ion-col",27),d.TgZ(13,"ion-grid",24),d.TgZ(14,"ion-row"),d.TgZ(15,"ion-col",25),d.TgZ(16,"ion-input",4),d.NdJ("change",function(i){const t=d.CHM(e).$implicit;return d.oxw().GetValueFromLovWithCode(i,"Bank",t)}),d.qZA(),d.qZA(),d.TgZ(17,"ion-col",26),d.TgZ(18,"ion-button",5),d.NdJ("click",function(){const i=d.CHM(e).$implicit;return d.oxw().ShowBankListLov(i)}),d._UZ(19,"ion-icon",6),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(20,"ion-col",14),d.TgZ(21,"ion-input",28),d.NdJ("ngModelChange",function(i){return d.CHM(e).$implicit.Price=i}),d.qZA(),d.qZA(),d.TgZ(22,"ion-col",13),d.TgZ(23,"ion-input",28),d.NdJ("ngModelChange",function(i){return d.CHM(e).$implicit.Description=i}),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=i.$implicit,t=i.index,n=d.oxw();d.xp6(1),d.Q6J("appBorderControl","Grid,row"),d.xp6(2),d.Oqu(t+1),d.xp6(1),d.Q6J("appBorderControl","Grid,row"),d.xp6(4),d.Q6J("readonly",!n.IsFormActive)("ngModel",e.CashName),d.xp6(2),d.Q6J("disabled",!n.IsFormActive),d.xp6(2),d.Q6J("appBorderControl","Grid,row"),d.xp6(4),d.Q6J("readonly",!n.IsFormActive)("ngModel",e.BankName),d.xp6(2),d.Q6J("disabled",!n.IsFormActive),d.xp6(2),d.Q6J("appBorderControl","Grid,row"),d.xp6(1),d.Q6J("readonly",!n.IsFormActive)("ngModel",e.Price),d.xp6(1),d.Q6J("appBorderControl","Grid,row"),d.xp6(1),d.Q6J("readonly",!n.IsFormActive)("ngModel",e.Description)}}function T(e,i){if(1&e){const e=d.EpF();d.TgZ(0,"ion-row",29),d.TgZ(1,"ion-col",30),d.TgZ(2,"ion-item"),d.TgZ(3,"ion-text"),d._uU(4,"Number:"),d.qZA(),d.TgZ(5,"ion-text"),d._uU(6),d.qZA(),d.qZA(),d.qZA(),d.TgZ(7,"ion-col",30),d.TgZ(8,"ion-item"),d.TgZ(9,"ion-text"),d._uU(10,"Cash Name:"),d.qZA(),d.TgZ(11,"ion-input",31),d.NdJ("dblclick",function(){const i=d.CHM(e).$implicit;return d.oxw().ShowCashListLov(i)})("change",function(i){const t=d.CHM(e).$implicit;return d.oxw().GetValueFromLovWithCode(i,"Cash",t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(12,"ion-col",30),d.TgZ(13,"ion-item"),d.TgZ(14,"ion-text"),d._uU(15,"Bank Name:"),d.qZA(),d.TgZ(16,"ion-input",31),d.NdJ("dblclick",function(){const i=d.CHM(e).$implicit;return d.oxw().ShowBankListLov(i)})("change",function(i){const t=d.CHM(e).$implicit;return d.oxw().GetValueFromLovWithCode(i,"Bank",t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(17,"ion-col",30),d.TgZ(18,"ion-item"),d.TgZ(19,"ion-text"),d._uU(20,"Price:"),d.qZA(),d.TgZ(21,"ion-input",18),d.NdJ("ngModelChange",function(i){return d.CHM(e).$implicit.Price=i}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(22,"ion-col",30),d.TgZ(23,"ion-item"),d.TgZ(24,"ion-text"),d._uU(25,"Description:"),d.qZA(),d.TgZ(26,"ion-textarea",18),d.NdJ("ngModelChange",function(i){return d.CHM(e).$implicit.Description=i}),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=i.$implicit,t=i.index,n=d.oxw();d.xp6(6),d.Oqu(t),d.xp6(5),d.Q6J("readonly",!n.IsFormActive)("ngModel",e.CashName),d.xp6(5),d.Q6J("readonly",!n.IsFormActive)("ngModel",e.BankName),d.xp6(5),d.Q6J("ngModel",e.Price),d.xp6(5),d.Q6J("ngModel",e.Description)}}function A(e,i){if(1&e){const e=d.EpF();d.TgZ(0,"ion-row",32),d.NdJ("click",function(){const i=d.CHM(e).$implicit;return d.oxw().NavClicked(i)}),d.TgZ(1,"ion-col",20),d._uU(2),d.qZA(),d.TgZ(3,"ion-col",21),d._UZ(4,"ion-datetime",33),d.qZA(),d.qZA()}if(2&e){const e=i.$implicit,t=d.oxw();d.xp6(1),d.Q6J("appBorderControl","Grid,row"),d.xp6(1),d.Oqu(e.Serial),d.xp6(1),d.Q6J("appBorderControl","Grid,row"),d.xp6(1),d.Q6J("ngModel",e.Date)("displayFormat",t.userSetting.DateDisplayFormat)}}const f=[{path:"",component:(()=>{class e extends c.S{constructor(e,i,t,n,o){super(),this.userSetting=e,this.crudManager=i,this.appRef=t,this.mdlCtrl=n,this.behaviorUser=o,this.gridSettingNav=new l.T(!1),this.gridSettingPayment=new l.T(!0),this.toolbar={TabInfo:{Id:18,UrlAddress:"payment",Title:"Payment"}},this.PaymentNav=[],this.FunctionInInsertSuccess=e=>{if(this.behaviorUser.IsLoadNavigatorAfterNew);else{let i=Math.max(...this.PaymentNav.map(e=>+e.Serial));this.PaymentNav.push({Id:e,Date:this.Payment.Date,Serial:(i+1).toString().padStart(this.userSetting.SerialFormat.PaymentZeroLength,"0")})}this.appRef.tick()},this.FunctionForSelectForm=e=>{this.Payment.PaymentDtl.splice(0);for(const i of e){this.Payment.Id=i.Id,this.Payment.Date=i.Date,this.Payment.Description=i.Description,this.Payment.PersonId=i.PersonId,this.Payment.PersonName=i.PersonName,this.Payment.RegardId=i.RegardId,this.Payment.RegardName=i.RegardName,this.Payment.Serial=i.Serial.toString().padStart(this.userSetting.SerialFormat.PaymentZeroLength,"0");let e={Id:-1,CashDefineId:-1,BankDefineId:-1,CashName:"",BankName:"",Price:0,Description:""};e.BankDefineId=i.BankDefineId,e.BankName=i.BankName,e.CashDefineId=i.CashDefineId,e.CashName=i.CashName,e.Description=i.PaymentDtlDescription,e.Id=i.PaymentDtlId,e.Price=i.Price,this.Payment.PaymentDtl.push(e)}this.appRef.tick()},this.FunctionInUpdateSuccess=()=>{let e=this.Payment.Id,i=this.PaymentNav.find(i=>i.Id==e);i&&(i.Date=this.Payment.Date,this.appRef.tick())},this.FunctionInDeleteSuccess=()=>{let e=this.PaymentNav.findIndex(e=>e.Id==this.Payment.Id);e>=0&&(this.PaymentNav.splice(e,1),this.appRef.tick())},this.Payment={Id:null,Serial:"",Date:"",PersonId:null,RegardId:null,PersonName:"",RegardName:"",Description:"",PaymentDtl:[]},this.MasterRow=this.Payment,this.TablesInfo=[new s.q("Payment","",1,!0),new s.q("PaymentDtl","Payment",2,!1)],this.TablesInfo[1].FkParentName="FkPayment",this.gridSettingPayment.IsDetail=!0,this.FunctionInSelectSuccess=i=>{this.PaymentNav.length>0&&i.length>0&&(this.PaymentNav=[]);for(const t of i)this.PaymentNav.push({Id:t.Id,Serial:t.Serial.toString().padStart(e.SerialFormat.PaymentZeroLength,"0"),Date:t.Date});this.SetEnabledForNextPage(this.PaymentNav,o,this.gridSettingNav),0==i.length&&(this.gridSettingNav.CanNextPage=!1),this.appRef.tick()},i.SelectData({TablesInfo:this.TablesInfo,CrudType:4,SelectName:"SelectForNav",SelectFunctionInSuccess:this.FunctionInSelectSuccess}),this.SelectNavJsonData={TablesInfo:this.TablesInfo,CrudType:4,SelectName:"SelectForNav",SelectFunctionInSuccess:this.FunctionInSelectSuccess}}ngOnInit(){}ShowCashListLov(e,i=null){this.PaymentDtl=e;let t={SelectName:"SelectForNav",SourceRow:this.PaymentDtl,TablesInfo:[new s.q("CashDefine","",1)],ColumnsConfig:[{Name:"Id",Title:"Id",MapToSource:"CashDefineId",Hidden:!0},{Name:"Name",Title:"Name",MapToSource:"CashName"},{Name:"Code",Title:"Code"}]};t.myApp=this.appRef,i?(t.SelectCondition=i,this.RunLovSilently(this.crudManager,t)):this.ShowDialog(this.mdlCtrl,t)}ShowBankListLov(e,i=null){this.PaymentDtl=e;let t={SelectName:"SelectForNav",SourceRow:this.PaymentDtl,TablesInfo:[new s.q("BankDefine","",1)],ColumnsConfig:[{Name:"Id",Title:"Id",MapToSource:"BankDefineId",Hidden:!0},{Name:"Name",Title:"Name",MapToSource:"BankName"},{Name:"AccountCode",Title:"AccountCode"}]};t.myApp=this.appRef,i?(t.SelectCondition=i,this.RunLovSilently(this.crudManager,t)):this.ShowDialog(this.mdlCtrl,t)}ShowPersonListLov(e=null){let i={SelectName:"PersonLov",SourceRow:this.MasterRow,TablesInfo:[new s.q("Person","",1)],ColumnsConfig:[{Name:"Id",Title:"Id",MapToSource:"PersonId",Hidden:!0},{Name:"FullName",Title:"Name",MapToSource:"PersonName"},{Name:"Code",Title:"Code"}]};i.myApp=this.appRef,e?(i.SelectCondition=e,this.RunLovSilently(this.crudManager,i)):this.ShowDialog(this.mdlCtrl,i)}ShowRegardListLov(e=null){let i={SelectName:"SelectForNav",SourceRow:this.MasterRow,TablesInfo:[new s.q("Regard","",1)],ColumnsConfig:[{Name:"Id",Title:"Id",MapToSource:"RegardId",Hidden:!0},{Name:"Name",Title:"Name",MapToSource:"RegardName"},{Name:"Code",Title:"Code",MapToSource:"NoMapped"}]};i.myApp=this.appRef,e?(i.SelectCondition=e,this.RunLovSilently(this.crudManager,i)):this.ShowDialog(this.mdlCtrl,i)}btnGridDtlClick(e){switch(e){case"Add":let e=Math.min(...this.Payment.PaymentDtl.map(e=>e.Id))||0;e>0&&(e=0),this.Payment.PaymentDtl.push({Id:e-1,CashDefineId:null,BankDefineId:null,CashName:"",BankName:"",Description:"",Price:0});break;case"Remove":let i=this.Payment.PaymentDtl.findIndex(e=>e.Id==this.PaymentDtl.Id);this.Payment.PaymentDtl.splice(i,1)}}rowGridDtlClick(e){this.PaymentDtl=e}NavClicked(e){this.crudManager.SelectData({TablesInfo:this.TablesInfo,CrudType:4,SelectName:"SelectForm",SelectFunctionInSuccess:this.FunctionForSelectForm,SelectCondition:[{FieldName:"Payment.Id",FieldValue:e.Id}]}),this.appRef.tick()}GetValueFromLovWithCode(e,i,t=null){let n,o=e.target.value;switch(i){case"Person":n=[{FieldName:"Code",FieldValue:o}],this.ShowPersonListLov(n);break;case"Regard":n=[{FieldName:"Code",FieldValue:o}],this.ShowRegardListLov(n);break;case"Cash":n=[{FieldName:"Code",FieldValue:o}],this.ShowCashListLov(t,n);break;case"Bank":n=[{FieldName:"AccountCode",FieldValue:o}],this.ShowBankListLov(t,n)}}}return e.\u0275fac=function(i){return new(i||e)(d.Y36(g.B),d.Y36(m.H),d.Y36(d.z2F),d.Y36(a.IN),d.Y36(p.O))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-payment"]],features:[d.qOj],decls:69,vars:26,consts:[[3,"toolbarInfo","FormModeChange","NewClick","SaveClick","EditClick","DeleteClick","CancelClick","VoiceRecorder"],["size-lg","2","size-md","3","size-sm","6","size-xs","12","offset-lg","2"],["size-lg","2","size-md","3","size-sm","6","size-xs","12"],[3,"readonly","ngModel","displayFormat","ngModelChange"],[3,"readonly","ngModel","change"],[3,"disabled","click"],["name","list"],["size","12"],["name","add-outline"],["name","remove-outline"],[3,"GridSetting"],[1,"ion-hide-md-down"],["size-xl","1","size-lg","1","size-md","1",3,"appBorderControl"],["size-xl","3","size-lg","3","size-md","3",3,"appBorderControl"],["size-xl","2","size-lg","2","size-md","2",3,"appBorderControl"],["class","ion-hide-md-down",3,"click",4,"ngFor","ngForOf"],["class","ion-hide-md-up","appBorderControl","",4,"ngFor","ngForOf"],["size-lg","6","size-md","10","size-sm","12","size-xs","12","offset-lg","3","offset-md","1"],[3,"ngModel","ngModelChange"],[3,"GridSetting","PageClicked"],["size-xl","1","size-lg","3","size-md","4","size-sm","6","size-xs","6","offset-lg","3","offset-md","2","offset-xl","4",3,"appBorderControl"],["size-xl","2","size-lg","2","size-md","3","size-sm","6","size-xs","6",3,"appBorderControl"],[3,"click",4,"ngFor","ngForOf"],[1,"ion-hide-md-down",3,"click"],[1,"ion-no-padding","ion-no-marging"],["size","9"],["size","3"],["size-xl","3","size-lg","3","size-md","3",1,"ion-justify-content-around",3,"appBorderControl"],[3,"readonly","ngModel","ngModelChange"],["appBorderControl","",1,"ion-hide-md-up"],["size-sm","6","size-xs","12"],[3,"readonly","ngModel","dblclick","change"],[3,"click"],["readonly","true",3,"ngModel","displayFormat"]],template:function(e,i){1&e&&(d.TgZ(0,"ion-header"),d.TgZ(1,"app-form-toolbar",0),d.NdJ("FormModeChange",function(e){return i.FormModeChanged(e)})("NewClick",function(){return i.NewMasterClicked()})("SaveClick",function(){return i.saveForm(i.crudManager)})("EditClick",function(){return i.EditClicked()})("DeleteClick",function(){return i.DeleteForm(i.crudManager)})("CancelClick",function(){return i.CancelClicked()})("VoiceRecorder",function(e){return i.getTextVoiceAndDo(e,i.crudManager)}),d.qZA(),d.qZA(),d.TgZ(2,"ion-content"),d.TgZ(3,"ion-grid"),d.TgZ(4,"ion-row"),d.TgZ(5,"ion-col",1),d.TgZ(6,"ion-item"),d.TgZ(7,"ion-label"),d._uU(8,"Serial"),d.qZA(),d.TgZ(9,"ion-text"),d._uU(10),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"ion-col",2),d.TgZ(12,"ion-item"),d.TgZ(13,"ion-label"),d._uU(14,"Date"),d.qZA(),d.TgZ(15,"ion-datetime",3),d.NdJ("ngModelChange",function(e){return i.MasterRow.Date=e}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(16,"ion-col",2),d.TgZ(17,"ion-item"),d.TgZ(18,"ion-label"),d._uU(19,"Person"),d.qZA(),d.TgZ(20,"ion-input",4),d.NdJ("change",function(e){return i.GetValueFromLovWithCode(e,"Person")}),d.qZA(),d.TgZ(21,"ion-button",5),d.NdJ("click",function(){return i.ShowPersonListLov()}),d._UZ(22,"ion-icon",6),d.qZA(),d.qZA(),d.qZA(),d.TgZ(23,"ion-col",2),d.TgZ(24,"ion-item"),d.TgZ(25,"ion-label"),d._uU(26,"Regard"),d.qZA(),d.TgZ(27,"ion-input",4),d.NdJ("change",function(e){return i.GetValueFromLovWithCode(e,"Regard")}),d.qZA(),d.TgZ(28,"ion-button",5),d.NdJ("click",function(){return i.ShowRegardListLov()}),d._UZ(29,"ion-icon",6),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(30,"ion-row"),d.TgZ(31,"ion-col",7),d.TgZ(32,"ion-buttons"),d.TgZ(33,"ion-button",5),d.NdJ("click",function(){return i.btnGridDtlClick("Add")}),d._UZ(34,"ion-icon",8),d.qZA(),d.TgZ(35,"ion-button",5),d.NdJ("click",function(){return i.btnGridDtlClick("Remove")}),d._UZ(36,"ion-icon",9),d.qZA(),d.qZA(),d.TgZ(37,"app-grid-view",10),d.TgZ(38,"ion-row",11),d.TgZ(39,"ion-col",12),d.TgZ(40,"ion-text"),d._uU(41,"Number"),d.qZA(),d.qZA(),d.TgZ(42,"ion-col",13),d.TgZ(43,"ion-text"),d._uU(44,"Cash Name"),d.qZA(),d.qZA(),d.TgZ(45,"ion-col",13),d.TgZ(46,"ion-text"),d._uU(47,"Bank Name"),d.qZA(),d.qZA(),d.TgZ(48,"ion-col",14),d.TgZ(49,"ion-text"),d._uU(50,"Price"),d.qZA(),d.qZA(),d.TgZ(51,"ion-col",13),d.TgZ(52,"ion-text"),d._uU(53,"Description"),d.qZA(),d.qZA(),d.qZA(),d.YNc(54,C,24,16,"ion-row",15),d.YNc(55,T,27,7,"ion-row",16),d.qZA(),d.qZA(),d.qZA(),d.TgZ(56,"ion-row"),d.TgZ(57,"ion-col",17),d.TgZ(58,"ion-item"),d.TgZ(59,"ion-label"),d._uU(60,"Description"),d.qZA(),d.TgZ(61,"ion-textarea",18),d.NdJ("ngModelChange",function(e){return i.MasterRow.Description=e}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(62,"app-grid-view",19),d.NdJ("PageClicked",function(e){return i.GoToPage(e,i.crudManager)}),d.TgZ(63,"ion-row"),d.TgZ(64,"ion-col",20),d._uU(65,"Serial"),d.qZA(),d.TgZ(66,"ion-col",21),d._uU(67,"Date"),d.qZA(),d.qZA(),d.YNc(68,A,5,5,"ion-row",22),d.qZA(),d.qZA()),2&e&&(d.xp6(1),d.Q6J("toolbarInfo",i.toolbar),d.xp6(9),d.Oqu(i.MasterRow.Serial),d.xp6(5),d.Q6J("readonly",!i.IsFormActive)("ngModel",i.MasterRow.Date)("displayFormat",i.userSetting.DateDisplayFormat),d.xp6(5),d.Q6J("readonly",!i.IsFormActive)("ngModel",i.MasterRow.PersonName),d.xp6(1),d.Q6J("disabled",!i.IsFormActive),d.xp6(6),d.Q6J("readonly",!i.IsFormActive)("ngModel",i.MasterRow.RegardName),d.xp6(1),d.Q6J("disabled",!i.IsFormActive),d.xp6(5),d.Q6J("disabled",!i.IsFormActive),d.xp6(2),d.Q6J("disabled",!i.IsFormActive),d.xp6(2),d.Q6J("GridSetting",i.gridSettingPayment),d.xp6(2),d.Q6J("appBorderControl","Grid,head"),d.xp6(3),d.Q6J("appBorderControl","Grid,head"),d.xp6(3),d.Q6J("appBorderControl","Grid,head"),d.xp6(3),d.Q6J("appBorderControl","Grid,head"),d.xp6(3),d.Q6J("appBorderControl","Grid,head"),d.xp6(3),d.Q6J("ngForOf",i.MasterRow.PaymentDtl),d.xp6(1),d.Q6J("ngForOf",i.MasterRow.PaymentDtl),d.xp6(6),d.Q6J("ngModel",i.MasterRow.Description),d.xp6(1),d.Q6J("GridSetting",i.gridSettingNav),d.xp6(2),d.Q6J("appBorderControl","Grid,head"),d.xp6(2),d.Q6J("appBorderControl","Grid,head"),d.xp6(2),d.Q6J("ngForOf",i.PaymentNav))},directives:[a.Gu,u.r,a.W2,a.jY,a.Nd,a.wI,a.Ie,a.Q$,a.yW,a.x4,a.QI,o.JJ,o.On,a.pK,a.j9,a.YG,a.gu,a.Sm,h.X,Z.L,n.sg,a.g2],styles:[""]}),e})()}];let N=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[r.Bz.forChild(f)],r.Bz]}),e})();var S=t(1883),q=t(3803),y=t(3143),P=t(4253);let I=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({providers:[m.H],imports:[[n.ez,o.u5,a.Pc,S.v,q.g,y.R,P.Y,N]]}),e})()}}]);