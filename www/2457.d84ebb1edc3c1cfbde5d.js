(self.webpackChunkKasianFinancial=self.webpackChunkKasianFinancial||[]).push([[2457],{2457:(e,i,t)=>{"use strict";t.r(i),t.d(i,{ReceiptPageModule:()=>x});var o=t(8583),n=t(665),r=t(7823),a=t(1348),c=t(9738),l=t(8372),s=t(7528),d=t(8720),p=t(282),g=t(2156),u=t(9226),h=t(4752),Z=t(375),m=t(6440);function C(e,i){if(1&e){const e=d.EpF();d.TgZ(0,"ion-row",22),d.NdJ("click",function(){const i=d.CHM(e).$implicit;return d.oxw().rowGridDtlClick(i)}),d.TgZ(1,"ion-col",11),d.TgZ(2,"ion-text"),d._uU(3),d.qZA(),d.qZA(),d.TgZ(4,"ion-col",12),d.TgZ(5,"ion-grid",23),d.TgZ(6,"ion-row"),d.TgZ(7,"ion-col",24),d.TgZ(8,"ion-input",4),d.NdJ("change",function(i){const t=d.CHM(e).$implicit;return d.oxw().GetValueFromLovWithCode(i,"Cash",t)}),d.qZA(),d.qZA(),d.TgZ(9,"ion-col",25),d.TgZ(10,"ion-button",5),d.NdJ("click",function(){const i=d.CHM(e).$implicit;return d.oxw().ShowCashListLov(i)}),d._UZ(11,"ion-icon",6),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(12,"ion-col",26),d.TgZ(13,"ion-grid",27),d.TgZ(14,"ion-row"),d.TgZ(15,"ion-col",24),d.TgZ(16,"ion-input",4),d.NdJ("change",function(i){const t=d.CHM(e).$implicit;return d.oxw().GetValueFromLovWithCode(i,"Bank",t)}),d.qZA(),d.qZA(),d.TgZ(17,"ion-col",25),d.TgZ(18,"ion-button",5),d.NdJ("click",function(){const i=d.CHM(e).$implicit;return d.oxw().ShowBankListLov(i)}),d._UZ(19,"ion-icon",6),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(20,"ion-col",13),d.TgZ(21,"ion-input",28),d.NdJ("ngModelChange",function(i){return d.CHM(e).$implicit.Price=i}),d.qZA(),d.qZA(),d.TgZ(22,"ion-col",12),d.TgZ(23,"ion-input",28),d.NdJ("ngModelChange",function(i){return d.CHM(e).$implicit.Description=i}),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=i.$implicit,t=i.index,o=d.oxw();d.xp6(1),d.Q6J("appBorderControl","Grid,row"),d.xp6(2),d.Oqu(t+1),d.xp6(1),d.Q6J("appBorderControl","Grid,row"),d.xp6(4),d.Q6J("readonly",!o.IsFormActive)("ngModel",e.CashName),d.xp6(2),d.Q6J("disabled",!o.IsFormActive),d.xp6(2),d.Q6J("appBorderControl","Grid,row"),d.xp6(4),d.Q6J("readonly",!o.IsFormActive)("ngModel",e.BankName),d.xp6(2),d.Q6J("disabled",!o.IsFormActive),d.xp6(2),d.Q6J("appBorderControl","Grid,row"),d.xp6(1),d.Q6J("readonly",!o.IsFormActive)("ngModel",e.Price),d.xp6(1),d.Q6J("appBorderControl","Grid,row"),d.xp6(1),d.Q6J("readonly",!o.IsFormActive)("ngModel",e.Description)}}function T(e,i){if(1&e){const e=d.EpF();d.TgZ(0,"ion-row",29),d.TgZ(1,"ion-col",30),d.TgZ(2,"ion-item"),d.TgZ(3,"ion-text"),d._uU(4,"Number:"),d.qZA(),d.TgZ(5,"ion-text"),d._uU(6),d.qZA(),d.qZA(),d.qZA(),d.TgZ(7,"ion-col",30),d.TgZ(8,"ion-item"),d.TgZ(9,"ion-text"),d._uU(10,"Cash Name:"),d.qZA(),d.TgZ(11,"ion-input",31),d.NdJ("dblclick",function(){const i=d.CHM(e).$implicit;return d.oxw().ShowCashListLov(i)})("change",function(i){const t=d.CHM(e).$implicit;return d.oxw().GetValueFromLovWithCode(i,"Cash",t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(12,"ion-col",30),d.TgZ(13,"ion-item"),d.TgZ(14,"ion-text"),d._uU(15,"Bank Name:"),d.qZA(),d.TgZ(16,"ion-input",31),d.NdJ("dblclick",function(){const i=d.CHM(e).$implicit;return d.oxw().ShowBankListLov(i)})("change",function(i){const t=d.CHM(e).$implicit;return d.oxw().GetValueFromLovWithCode(i,"Bank",t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(17,"ion-col",30),d.TgZ(18,"ion-item"),d.TgZ(19,"ion-text"),d._uU(20,"Price:"),d.qZA(),d.TgZ(21,"ion-input",17),d.NdJ("ngModelChange",function(i){return d.CHM(e).$implicit.Price=i}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(22,"ion-col",30),d.TgZ(23,"ion-item"),d.TgZ(24,"ion-text"),d._uU(25,"Description:"),d.qZA(),d.TgZ(26,"ion-textarea",17),d.NdJ("ngModelChange",function(i){return d.CHM(e).$implicit.Description=i}),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=i.$implicit,t=i.index,o=d.oxw();d.xp6(6),d.Oqu(t),d.xp6(5),d.Q6J("readonly",!o.IsFormActive)("ngModel",e.CashName),d.xp6(5),d.Q6J("readonly",!o.IsFormActive)("ngModel",e.BankName),d.xp6(5),d.Q6J("ngModel",e.Price),d.xp6(5),d.Q6J("ngModel",e.Description)}}function A(e,i){if(1&e){const e=d.EpF();d.TgZ(0,"ion-row",32),d.NdJ("click",function(){const i=d.CHM(e).$implicit;return d.oxw().NavClicked(i)}),d.TgZ(1,"ion-col",19),d._uU(2),d.qZA(),d.TgZ(3,"ion-col",20),d._UZ(4,"ion-datetime",33),d.qZA(),d.qZA()}if(2&e){const e=i.$implicit,t=d.oxw();d.xp6(1),d.Q6J("appBorderControl","Grid,row"),d.xp6(1),d.Oqu(e.Serial),d.xp6(1),d.Q6J("appBorderControl","Grid,row"),d.xp6(1),d.Q6J("ngModel",e.Date)("displayFormat",t.userSetting.DateDisplayFormat)}}const f=[{path:"",component:(()=>{class e extends s.S{constructor(e,i,t,o,n){super(),this.userSetting=e,this.crudManager=i,this.appRef=t,this.mdlCtrl=o,this.behaviorUser=n,this.gridSettingNav=new l.T(!1),this.gridSettingReceipt=new l.T(!0),this.toolbar={TabInfo:{Id:17,UrlAddress:"receipt",Title:"Receipt"}},this.ReceiptNav=[],this.FunctionInInsertSuccess=e=>{if(this.behaviorUser.IsLoadNavigatorAfterNew);else{let i=Math.max(...this.ReceiptNav.map(e=>+e.Serial));this.ReceiptNav.push({Id:e,Date:this.Receipt.Date,Serial:(i+1).toString().padStart(this.userSetting.SerialFormat.ReceiptZeroLength,"0")})}this.appRef.tick()},this.FunctionForSelectForm=e=>{this.Receipt.ReceiptDtl.splice(0);for(const i of e){this.Receipt.Id=i.Id,this.Receipt.Date=i.Date,this.Receipt.Description=i.Description,this.Receipt.PersonId=i.PersonId,this.Receipt.PersonName=i.PersonName,this.Receipt.RegardId=i.RegardId,this.Receipt.RegardName=i.RegardName,this.Receipt.Serial=i.Serial.toString().padStart(this.userSetting.SerialFormat.ReceiptZeroLength,"0");let e={Id:-1,CashDefineId:-1,BankDefineId:-1,CashName:"",BankName:"",Price:0,Description:""};e.BankDefineId=i.BankDefineId,e.BankName=i.BankName,e.CashDefineId=i.CashDefineId,e.CashName=i.CashName,e.Description=i.ReceiptDtlDescription,e.Id=i.ReceiptDtlId,e.Price=i.Price,this.Receipt.ReceiptDtl.push(e)}this.appRef.tick()},this.FunctionInUpdateSuccess=()=>{let e=this.Receipt.Id,i=this.ReceiptNav.find(i=>i.Id==e);i&&(i.Date=this.Receipt.Date,this.appRef.tick())},this.FunctionInDeleteSuccess=()=>{let e=this.ReceiptNav.findIndex(e=>e.Id==this.Receipt.Id);e>=0&&(this.ReceiptNav.splice(e,1),this.appRef.tick())},this.Receipt={Id:null,Serial:"",Date:"",PersonId:null,RegardId:null,PersonName:"",RegardName:"",Description:"",ReceiptDtl:[]},this.MasterRow=this.Receipt,this.TablesInfo=[new c.q("Receipt","",1,!0),new c.q("ReceiptDtl","Receipt",2,!1)],this.TablesInfo[1].FkParentName="FkReceipt",this.gridSettingReceipt.IsDetail=!0,this.FunctionInSelectSuccess=i=>{this.ReceiptNav.length>0&&i.length>0&&(this.ReceiptNav=[]);for(const t of i)this.ReceiptNav.push({Id:t.Id,Serial:t.Serial.toString().padStart(e.SerialFormat.ReceiptZeroLength,"0"),Date:t.Date});this.SetEnabledForNextPage(this.ReceiptNav,n,this.gridSettingNav),0==i.length&&(this.gridSettingNav.CanNextPage=!1),this.appRef.tick()},i.SelectData({TablesInfo:this.TablesInfo,CrudType:4,SelectName:"SelectForNav",SelectFunctionInSuccess:this.FunctionInSelectSuccess}),this.SelectNavJsonData={TablesInfo:this.TablesInfo,CrudType:4,SelectName:"SelectForNav",SelectFunctionInSuccess:this.FunctionInSelectSuccess}}ngOnInit(){}ShowCashListLov(e,i=null){this.ReceiptDtl=e;let t={SelectName:"SelectForNav",SourceRow:this.ReceiptDtl,TablesInfo:[new c.q("CashDefine","",1)],ColumnsConfig:[{Name:"Id",Title:"Id",MapToSource:"CashDefineId",Hidden:!0},{Name:"Name",Title:"Name",MapToSource:"CashName"},{Name:"Code",Title:"Code"}]};t.myApp=this.appRef,i?(t.SelectCondition=i,this.RunLovSilently(this.crudManager,t)):this.ShowDialog(this.mdlCtrl,t)}ShowBankListLov(e,i=null){this.ReceiptDtl=e;let t={SelectName:"SelectForNav",SourceRow:this.ReceiptDtl,TablesInfo:[new c.q("BankDefine","",1)],ColumnsConfig:[{Name:"Id",Title:"Id",MapToSource:"BankDefineId",Hidden:!0},{Name:"Name",Title:"Name",MapToSource:"BankName"},{Name:"AccountCode",Title:"AccountCode"}]};t.myApp=this.appRef,i?(t.SelectCondition=i,this.RunLovSilently(this.crudManager,t)):this.ShowDialog(this.mdlCtrl,t)}ShowPersonListLov(e=null){let i={SelectName:"PersonLov",SourceRow:this.MasterRow,TablesInfo:[new c.q("Person","",1)],ColumnsConfig:[{Name:"Id",Title:"Id",MapToSource:"PersonId",Hidden:!0},{Name:"FullName",Title:"Name",MapToSource:"PersonName"},{Name:"Code",Title:"Code"}]};i.myApp=this.appRef,e?(i.SelectCondition=e,this.RunLovSilently(this.crudManager,i)):this.ShowDialog(this.mdlCtrl,i)}ShowRegardListLov(e=null){let i={SelectName:"SelectForNav",SourceRow:this.MasterRow,TablesInfo:[new c.q("Regard","",1)],ColumnsConfig:[{Name:"Id",Title:"Id",MapToSource:"RegardId",Hidden:!0},{Name:"Name",Title:"Name",MapToSource:"RegardName"},{Name:"Code",Title:"Code",MapToSource:"NoMapped"}]};i.myApp=this.appRef,e?(i.SelectCondition=e,this.RunLovSilently(this.crudManager,i)):this.ShowDialog(this.mdlCtrl,i)}btnGridDtlClick(e){switch(e){case"Add":let e=Math.min(...this.Receipt.ReceiptDtl.map(e=>e.Id))||0;e>0&&(e=0),this.Receipt.ReceiptDtl.push({Id:e-1,CashDefineId:null,BankDefineId:null,CashName:"",BankName:"",Description:"",Price:0});break;case"Remove":let i=this.Receipt.ReceiptDtl.findIndex(e=>e.Id==this.ReceiptDtl.Id);this.Receipt.ReceiptDtl.splice(i,1)}}rowGridDtlClick(e){this.ReceiptDtl=e}NavClicked(e){this.crudManager.SelectData({TablesInfo:this.TablesInfo,CrudType:4,SelectName:"SelectForm",SelectFunctionInSuccess:this.FunctionForSelectForm,SelectCondition:[{FieldName:"Receipt.Id",FieldValue:e.Id}]}),this.appRef.tick()}GetValueFromLovWithCode(e,i,t=null){let o,n=e.target.value;switch(i){case"Person":o=[{FieldName:"Code",FieldValue:n}],this.ShowPersonListLov(o);break;case"Regard":o=[{FieldName:"Code",FieldValue:n}],this.ShowRegardListLov(o);break;case"Cash":o=[{FieldName:"Code",FieldValue:n}],this.ShowCashListLov(t,o);break;case"Bank":o=[{FieldName:"AccountCode",FieldValue:n}],this.ShowBankListLov(t,o)}}}return e.\u0275fac=function(i){return new(i||e)(d.Y36(p.B),d.Y36(g.H),d.Y36(d.z2F),d.Y36(r.IN),d.Y36(u.O))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-receipt"]],features:[d.qOj],decls:68,vars:26,consts:[[3,"toolbarInfo","FormModeChange","NewClick","SaveClick","EditClick","DeleteClick","CancelClick","VoiceRecorder"],["size-lg","2","size-md","3","size-sm","6","size-xs","12","offset-lg","2"],["size-lg","2","size-md","3","size-sm","6","size-xs","12"],[3,"readonly","ngModel","displayFormat","ngModelChange"],[3,"readonly","ngModel","change"],[3,"disabled","click"],["name","list"],["name","add-outline"],["name","remove-outline"],[3,"GridSetting"],[1,"ion-hide-md-down"],["size-xl","1","size-lg","1","size-md","1",3,"appBorderControl"],["size-xl","3","size-lg","3","size-md","3",3,"appBorderControl"],["size-xl","2","size-lg","2","size-md","2",3,"appBorderControl"],["class","ion-hide-md-down",3,"click",4,"ngFor","ngForOf"],["class","ion-hide-md-up","appBorderControl","",4,"ngFor","ngForOf"],["size-lg","6","size-md","10","size-sm","12","size-xs","12","offset-lg","3","offset-md","1"],[3,"ngModel","ngModelChange"],[3,"GridSetting","PageClicked"],["size-xl","1","size-lg","3","size-md","4","size-sm","6","size-xs","6","offset-lg","3","offset-md","2","offset-xl","4",3,"appBorderControl"],["size-xl","2","size-lg","2","size-md","3","size-sm","6","size-xs","6",3,"appBorderControl"],[3,"click",4,"ngFor","ngForOf"],[1,"ion-hide-md-down",3,"click"],[1,"ion-no-padding"],["size","9"],["size","3"],["size-xl","3","size-lg","3","size-md","3",1,"ion-justify-content-around",3,"appBorderControl"],[1,"ion-no-padding","ion-no-marging"],[3,"readonly","ngModel","ngModelChange"],["appBorderControl","",1,"ion-hide-md-up"],["size-sm","6","size-xs","12"],[3,"readonly","ngModel","dblclick","change"],[3,"click"],["readonly","true",3,"ngModel","displayFormat"]],template:function(e,i){1&e&&(d.TgZ(0,"ion-header"),d.TgZ(1,"app-form-toolbar",0),d.NdJ("FormModeChange",function(e){return i.FormModeChanged(e)})("NewClick",function(){return i.NewMasterClicked()})("SaveClick",function(){return i.saveForm(i.crudManager)})("EditClick",function(){return i.EditClicked()})("DeleteClick",function(){return i.DeleteForm(i.crudManager)})("CancelClick",function(){return i.CancelClicked()})("VoiceRecorder",function(e){return i.getTextVoiceAndDo(e,i.crudManager)}),d.qZA(),d.qZA(),d.TgZ(2,"ion-content"),d.TgZ(3,"ion-grid"),d.TgZ(4,"ion-row"),d.TgZ(5,"ion-col",1),d.TgZ(6,"ion-item"),d.TgZ(7,"ion-label"),d._uU(8,"Serial"),d.qZA(),d.TgZ(9,"ion-text"),d._uU(10),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"ion-col",2),d.TgZ(12,"ion-item"),d.TgZ(13,"ion-label"),d._uU(14,"Date"),d.qZA(),d.TgZ(15,"ion-datetime",3),d.NdJ("ngModelChange",function(e){return i.MasterRow.Date=e}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(16,"ion-col",2),d.TgZ(17,"ion-item"),d.TgZ(18,"ion-label"),d._uU(19,"Person"),d.qZA(),d.TgZ(20,"ion-input",4),d.NdJ("change",function(e){return i.GetValueFromLovWithCode(e,"Person")}),d.qZA(),d.TgZ(21,"ion-button",5),d.NdJ("click",function(){return i.ShowPersonListLov()}),d._UZ(22,"ion-icon",6),d.qZA(),d.qZA(),d.qZA(),d.TgZ(23,"ion-col",2),d.TgZ(24,"ion-item"),d.TgZ(25,"ion-label"),d._uU(26,"Regard"),d.qZA(),d.TgZ(27,"ion-input",4),d.NdJ("change",function(e){return i.GetValueFromLovWithCode(e,"Regard")}),d.qZA(),d.TgZ(28,"ion-button",5),d.NdJ("click",function(){return i.ShowRegardListLov()}),d._UZ(29,"ion-icon",6),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(30,"ion-buttons"),d.TgZ(31,"ion-button",5),d.NdJ("click",function(){return i.btnGridDtlClick("Add")}),d._UZ(32,"ion-icon",7),d.qZA(),d.TgZ(33,"ion-button",5),d.NdJ("click",function(){return i.btnGridDtlClick("Remove")}),d._UZ(34,"ion-icon",8),d.qZA(),d.qZA(),d.TgZ(35,"app-grid-view",9),d.TgZ(36,"ion-row",10),d.TgZ(37,"ion-col",11),d.TgZ(38,"ion-text"),d._uU(39,"Number"),d.qZA(),d.qZA(),d.TgZ(40,"ion-col",12),d.TgZ(41,"ion-text"),d._uU(42,"Cash Name"),d.qZA(),d.qZA(),d.TgZ(43,"ion-col",12),d.TgZ(44,"ion-text"),d._uU(45,"Bank Name"),d.qZA(),d.qZA(),d.TgZ(46,"ion-col",13),d.TgZ(47,"ion-text"),d._uU(48,"Price"),d.qZA(),d.qZA(),d.TgZ(49,"ion-col",12),d.TgZ(50,"ion-text"),d._uU(51,"Description"),d.qZA(),d.qZA(),d.qZA(),d.YNc(52,C,24,16,"ion-row",14),d.YNc(53,T,27,7,"ion-row",15),d.qZA(),d.TgZ(54,"ion-grid"),d.TgZ(55,"ion-row"),d.TgZ(56,"ion-col",16),d.TgZ(57,"ion-item"),d.TgZ(58,"ion-label"),d._uU(59,"Description"),d.qZA(),d.TgZ(60,"ion-textarea",17),d.NdJ("ngModelChange",function(e){return i.MasterRow.Description=e}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(61,"app-grid-view",18),d.NdJ("PageClicked",function(e){return i.GoToPage(e,i.crudManager)}),d.TgZ(62,"ion-row"),d.TgZ(63,"ion-col",19),d._uU(64,"Serial"),d.qZA(),d.TgZ(65,"ion-col",20),d._uU(66,"Date "),d.qZA(),d.qZA(),d.YNc(67,A,5,5,"ion-row",21),d.qZA(),d.qZA()),2&e&&(d.xp6(1),d.Q6J("toolbarInfo",i.toolbar),d.xp6(9),d.Oqu(i.MasterRow.Serial),d.xp6(5),d.Q6J("readonly",!i.IsFormActive)("ngModel",i.MasterRow.Date)("displayFormat",i.userSetting.DateDisplayFormat),d.xp6(5),d.Q6J("readonly",!i.IsFormActive)("ngModel",i.MasterRow.PersonName),d.xp6(1),d.Q6J("disabled",!i.IsFormActive),d.xp6(6),d.Q6J("readonly",!i.IsFormActive)("ngModel",i.MasterRow.RegardName),d.xp6(1),d.Q6J("disabled",!i.IsFormActive),d.xp6(3),d.Q6J("disabled",!i.IsFormActive),d.xp6(2),d.Q6J("disabled",!i.IsFormActive),d.xp6(2),d.Q6J("GridSetting",i.gridSettingReceipt),d.xp6(2),d.Q6J("appBorderControl","Grid,head"),d.xp6(3),d.Q6J("appBorderControl","Grid,head"),d.xp6(3),d.Q6J("appBorderControl","Grid,head"),d.xp6(3),d.Q6J("appBorderControl","Grid,head"),d.xp6(3),d.Q6J("appBorderControl","Grid,head"),d.xp6(3),d.Q6J("ngForOf",i.MasterRow.ReceiptDtl),d.xp6(1),d.Q6J("ngForOf",i.MasterRow.ReceiptDtl),d.xp6(7),d.Q6J("ngModel",i.MasterRow.Description),d.xp6(1),d.Q6J("GridSetting",i.gridSettingNav),d.xp6(2),d.Q6J("appBorderControl","Grid,head"),d.xp6(2),d.Q6J("appBorderControl","Grid,head"),d.xp6(2),d.Q6J("ngForOf",i.ReceiptNav))},directives:[r.Gu,h.r,r.W2,r.jY,r.Nd,r.wI,r.Ie,r.Q$,r.yW,r.x4,r.QI,n.JJ,n.On,r.pK,r.j9,r.YG,r.gu,r.Sm,Z.X,m.L,o.sg,r.g2],styles:[""]}),e})()}];let N=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[a.Bz.forChild(f)],a.Bz]}),e})();var S=t(1883),R=t(3803),q=t(3143),I=t(4253);let x=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({providers:[g.H],imports:[[o.ez,n.u5,r.Pc,S.v,R.g,q.R,I.Y,N]]}),e})()}}]);